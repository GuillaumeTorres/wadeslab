version: "3"
services:
  haproxy:
    build: haproxy
    networks:
      frontend:
      httpd_net:
      jenkins_net:
    ports:
      - "443:443"
      - "80:80"
  httpd:
    build: wadeshome
    ports:
      - "8081"
    environment:
      - NGINX_HOST=wadeslab.tk
      - NGINX_PORT=8081
    networks:
      httpd_net:
        aliases:
          - home.lab
  jenkins:
    build: jenkins
    volumes:
      - ./jenkins/data:/var/jenkins_home
    networks:
      jenkins_net:
        aliases:
          - jenkins.lab
    ports:
      - "8080"
networks:
  frontend:
  jenkins_net:
  httpd_net:
