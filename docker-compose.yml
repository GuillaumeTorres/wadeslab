version: "3"
services:
  haproxy:
    build: haproxy
    networks:
      frontend:
      httpd_net:
      jenkins_net:
      netdata_net:
    ports:
      - "443:443"
      - "80:80"
  httpd:
    build: wadeshome
    networks:
      httpd_net:
        aliases:
          - home
  jenkins:
    build: jenkins
    volumes:
      - jenkins_data:/var/jenkins_home
    networks:
      jenkins_net:
        aliases:
          - jenkins
  netdata:
    image: titpetric/netdata
    cap_add:
      - SYS_PTRACE
    volumes:
      - '/proc:/host/proc:ro'
      - '/sys:/host/sys:ro'
    networks:
      netdata_net:
        aliases:
          - netdata
networks:
  frontend:
  jenkins_net:
  httpd_net:
  netdata_net:
volumes:
  jenkins_data:
